<app-card [titulo]="'ParÃ¡metros'">
  <section card-body>
    <form [formGroup]="formularioFiltros">
      <div class="row g-4 mb-4">
        <div class="col-12 col-md-6 col-lg-3">
          <label class="form-label fw-semibold">Fecha desde</label>
          <input
            type="date"
            formControlName="fecha_desde"
            class="form-control"
            placeholder="Seleccione fecha inicial"
          />
        </div>
        <div class="col-12 col-md-6 col-lg-3">
          <label class="form-label fw-semibold">Fecha hasta</label>
          <input
            type="date"
            formControlName="fecha_hasta"
            class="form-control"
            placeholder="Seleccione fecha final"
          />
        </div>
      </div>
    </form>
  </section>
</app-card>
<app-card [titulo]="'MENU.FUNCIONALIDAD.ESTADOSITUACIONFINANCIERA'">
  <section card-body>
    <div class="d-flex justify-content-end mb-2">
      <div class="btn-group btn-sm shadow-sm">
        <app-comun-btn-exportar (emitirExportarExcel)="descargarExcel()" />
        <button
          type="submit"
          class="btn btn-sm btn-primary"
          #btnGuardar
          (click)="generar()"
          [disabled]="cargandoCuentas()"
        >
          @if (cargandoCuentas()) {
            <div class="spinner-border spinner-border-sm mx-4" role="status">
              <span class="sr-only">Generando...</span>
            </div>
          } @else {
            Generar
          }
        </button>
      </div>
    </div>
    <div class="table-responsive">
      <table
        class="table table-hover table-bordered table-rounded border gy-2 gs-2"
      >
        <thead>
          <tr class="text-gray-800 bg-gray-100">
            <th class="text-center" translate="LISTAS.CONMOVIENTO.CLASE"></th>
            <th class="text-center" translate="LISTAS.CONMOVIENTO.GRUPO"></th>
            <th class="text-center" translate="LISTAS.CONMOVIENTO.CUENTA_CODIGO"></th>
            <th class="text-center" translate="LISTAS.CONMOVIENTO.CUENTA_NOMBRE"></th>
            <th class="text-center" translate="LISTAS.CONMOVIENTO.SALDO"></th>
          </tr>
        </thead>
        <tbody>
          @for (item of situacionFinanciera; track $index) {
            <tr>
              <td>{{ item.cuenta_clase_nombre }}</td>
              <td>{{ item.cuenta_grupo_nombre }}</td>
              <td>{{ item.cuenta_codigo }}</td>
              <td>{{ item.cuenta_nombre }}</td>
              <td class="text-end">{{ item.saldo | currency: "$" }}</td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </section>
</app-card>

<ng-template
  #formError
  let-control="control"
  let-message="message"
  let-validation="validation"
  let-cantidadCaracteres="cantidadCaracteres"
>
  <ng-container
    *ngIf="control.hasError(validation) && (control.dirty || control.touched)"
  >
    <div class="fv-plugins-message-container">
      <div class="fv-help-block">
        <span role="alert"> {{ message }} {{ cantidadCaracteres }} </span>
      </div>
    </div>
  </ng-container>
</ng-template>
