<div class="d-flex mb-5 justify-content-between align-items-center">
  <div class="d-flex gap-2">
    <app-comun-btn-atras />
    <div class="btn-group btn-sm shadow-sm" role="group" aria-label="Basic example">
      <button type="button" class="btn btn-sm btn-flex bg-body btn-color-gray-700 btn-active-primary btn-text-primary"
        (click)="navegarEditar(programacion.id)" [disabled]="
          arrEstados.estado_aprobado ||
          programacion.estado_aprobado ||
          programacion.estado_generado
        ">
        {{ "FORMULARIOS.BOTONES.COMUNES.EDITAR" | translate }}
      </button>

      <button type="button" class="btn btn-sm btn-flex bg-body btn-color-gray-700 btn-active-primary btn-text-primary"
        (click)="generar()" [disabled]="
          generando ||
          !arrProgramacionDetalle.length ||
          programacion.estado_generado
        ">
        @if (generando) {
        <div class="spinner-border spinner-border-sm mx-4" role="status">
          <span class="sr-only">Generando...</span>
        </div>
        } @else {
        {{ "FORMULARIOS.BOTONES.COMUNES.GENERAR" | translate }}
        }
      </button>
      <button type="submit" class="btn btn-sm btn-flex bg-body btn-color-gray-700 btn-active-primary btn-text-primary"
        #btnGuardar translate="" (click)="imprimir()">
        {{ "FORMULARIOS.BOTONES.COMUNES.PDF" | translate }}
      </button>
      <button type="button" class="btn btn-sm btn-flex bg-body btn-color-gray-700 btn-active-primary btn-text-primary"
        (click)="aprobar()" [disabled]="
          arrEstados.estado_aprobado ||
          !programacion.estado_generado ||
          programacion.estado_aprobado
        ">
        {{ "FORMULARIOS.BOTONES.COMUNES.APROBAR" | translate }}
      </button>

      <div class="btn-group" ngbDropdown autoClose="outside" #OpcionesDropdown="ngbDropdown">
        <button type="button" class="btn btn-sm btn-flex bg-body btn-color-gray-700 btn-active-primary btn-text-primary"
          id="dropdownBasic1" ngbDropdownToggle>
          Opciones
        </button>
        <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
          <button ngbDropdownItem (click)="desgenerar()" [disabled]="
              desgenerando ||
              !programacion.estado_generado ||
              programacion.estado_aprobado
            ">
            @if (desgenerando) {
            <div class="spinner-border spinner-border-sm" role="status">
              <span class="sr-only">Desgenerando...</span>
            </div>
            Desgenerando... } @else {
            {{ "FORMULARIOS.BOTONES.COMUNES.DESGENERAR" | translate }}
            }
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="d-flex justify-content-end gap-2">
    <ng-container *ngIf="programacion.estado_generado">
      <span class="badge badge-success">Generado</span>
    </ng-container>
    <ng-container *ngIf="arrEstados.estado_aprobado || programacion.estado_aprobado">
      <span class="badge badge-success">Aprobado</span>
    </ng-container>
  </div>
</div>

<app-card>
  <section card-titulo>
    {{ "FORMULARIOS.BOTONES.COMUNES.DETALLE" | translate | titlecase }}
    {{ "MENU.FUNCIONALIDAD." + (modelo | uppercase) | translate | lowercase }}
  </section>
  <section card-body>
    <div class="table-responsive-sm">
      <table class="table table-bordered table-sm">
        <tbody>
          <tr>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.CODIGO"></td>
            <td>{{ programacion.id }}</td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.PAGOTIPO"></td>
            <td colspan="3">{{ programacion.pago_tipo_nombre }}</td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.DEVENGADO"></td>
            <td class="text-end">
              {{ programacion.devengado | number }}
            </td>
          </tr>
          <tr>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.NOMBRE"></td>
            <td>{{ programacion.nombre }}</td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100" translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.GRUPO">
            </td>
            <td colspan="3">{{ programacion.grupo_nombre }}</td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.DEDUCCION"></td>
            <td class="text-end">
              {{ programacion.deduccion | number }}
            </td>
          </tr>
          <tr>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.FECHADESDE"></td>
            <td>{{ programacion.fecha_desde }}</td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.PERIODO"></td>
            <td colspan="3">{{ programacion.periodo_nombre }}</td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100" translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.TOTAL">
            </td>
            <td class="text-end">
              {{ programacion.total | number }}
            </td>
          </tr>
          <tr>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.FECHAHASTA"></td>
            <td>{{ programacion.fecha_hasta }}</td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100" translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.DIAS">
            </td>
            <td colspan="3">{{ programacion.dias }}</td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"></td>
            <td></td>
          </tr>
          <tr>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"></td>
            <td></td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.CONTRATOS"></td>
            <td colspan="3">
              {{ programacion.contratos | number }}
            </td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"></td>
            <td></td>
          </tr>
          <tr>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100" translate="FORMULARIOS.CAMPOS.FACTURA.COMENTARIO"></td>
            <td colspan="12">{{ programacion.comentario }}</td>
          </tr>
          @if (mostrarMasDetalles) {
          <tr appAnimacionFadeInOut>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100" translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.HORAS">
            </td>
            <td>{{ programacion.pago_horas ? "SI" : "NO" }}</td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.AUXILIOTRANSPORTE"></td>
            <td>{{ programacion.pago_auxilio_transporte ? "SI" : "NO" }}</td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.INCAPACIDAD"></td>
            <td>{{ programacion.pago_incapacidad ? "SI" : "NO" }}</td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.LICENCIA"></td>
            <td>{{ programacion.pago_licencia ? "SI" : "NO" }}</td>
          </tr>
          <tr appAnimacionFadeInOut>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.VACACION"></td>
            <td>{{ programacion.pago_vacacion ? "SI" : "NO" }}</td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.DESCUENTOSALUD"></td>
            <td>{{ programacion.descuento_salud ? "SI" : "NO" }}</td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.DESCUENTOPENSION"></td>
            <td>{{ programacion.descuento_pension ? "SI" : "NO" }}</td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100" translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.FONDO">
            </td>
            <td>
              {{ programacion.descuento_fondo_solidaridad ? "SI" : "NO" }}
            </td>
          </tr>
          <tr appAnimacionFadeInOut>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.RETENCION"></td>
            <td>{{ programacion.descuento_retencion_fuente ? "SI" : "NO" }}</td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.ADICIONAL"></td>
            <td>
              {{ programacion.adicional ? "SI" : "NO" }}
            </td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.DESCUENTOCREDITO"></td>
            <td>{{ programacion.descuento_credito ? "SI" : "NO" }}</td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.DESCUENTOEMBARGO"></td>
            <td>{{ programacion.descuento_embargo ? "SI" : "NO" }}</td>
          </tr>
          }
        </tbody>
      </table>
    </div>

    <button class="d-flex align-items-center mb-4 border-0 bg-transparent arrow" (click)="mostrarTodosLosDetalles()">
      <div class="text-primary fw-semibold" translate="{{
          mostrarMasDetalles
            ? 'FORMULARIOS.BOTONES.COMUNES.VERMENOS'
            : 'FORMULARIOS.BOTONES.COMUNES.VERMAS'
        }}"></div>
      @if (mostrarMasDetalles) {
      <app-keenicon name="up" class="fs-1 text-primary"></app-keenicon>
      } @else {
      <app-keenicon name="down" class="fs-1 text-primary"></app-keenicon>
      }
    </button>

    <div class="row mb-5">
      <div class="col-12">
        <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav nav-tabs nav-line-tabs nav-line-tabs-2x mb-5 fs-6">
          <li [ngbNavItem]="1" [destroyOnHide]="true" class="nav-item" (click)="consultarDatos()">
            <a class="nav-link" ngbNavLink data-bs-toggle="tab"
              translate="FORMULARIOS.TITULOS.FACTURACION.DETALLES"></a>
            <ng-template ngbNavContent>
              <div class="d-flex justify-content-end mb-4">
                <div class="btn-group" role="group">

                  <div class="btn-group" ngbDropdown #OpcionesDropdown="ngbDropdown">
                    <button type="button"
                      class="btn btn-sm btn-flex bg-body btn-color-gray-700 btn-active-primary btn-text-primary"
                      id="dropdownBasic1" ngbDropdownToggle>
                      Excel
                    </button>
                    <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                      <button (click)="descargarExcelDetalle()" ngbDropdownItem>
                        {{ "FORMULARIOS.BOTONES.COMUNES.DETALLE" | translate }}
                      </button>
                      <butto (click)="descargarExcelNomina()" ngbDropdownItem>
                        {{ "FORMULARIOS.BOTONES.COMUNES.NOMINA" | translate }}
                      </butto>
                      <button (click)="descargarExcelNominaDetalle()" ngbDropdownItem>
                        {{ "FORMULARIOS.BOTONES.COMUNES.NOMINADETALLE" | translate }}
                      </button>
                    </div>
                  </div>

                  <button type="button" [disabled]="
                      programacion.estado_generado || cargandoContratos
                    " (click)="cargarContratos()" class="btn btn-sm btn-primary">
                    @if (cargandoContratos) {
                    <div class="spinner-border spinner-border-sm" role="status">
                      <span class="sr-only">Cargando...</span>
                    </div>
                    Cargando... } @else {
                    {{
                    "FORMULARIOS.BOTONES.COMUNES.CARGARCONTRATOS" | translate
                    }}
                    }
                  </button>

                  <button type="button" [disabled]="programacion.estado_generado" (click)="eliminarRegistros()"
                    class="btn btn-sm btn-danger" translate="FORMULARIOS.BOTONES.COMUNES.ELIMINAR"></button>
                </div>
              </div>
              <div class="table-responsive">
                <table id="tableDetalles" class="table table-bordered table-row-gray-500">
                  <thead>
                    <tr>
                      <th class="bg-gray-100" style="width: 50px">Id</th>
                      <th class="bg-gray-100">
                        <div>Identificación</div>
                      </th>
                      <th (click)="orderPor('contrato__contacto__nombre_corto', 0)"
                        [ngClass]="{ 'cursor-pointer user-select-none': true }" class="bg-gray-100">
                        <div class="d-flex justify-content-between">
                          <div style="flex: 1; text-align: center">Nombre</div>
                        <div>
                          <ng-container *ngIf="
                              this.ordenadoTabla === 'contrato__contacto__nombre_corto' ||
                                this.ordenadoTabla === '-contrato__contacto__nombre_corto' ;
                              else iconopordefecto
                            ">
                            <i class="ki-outline ki-arrow-up fs-2"
                              *ngIf="this.ordenadoTabla === 'contrato__contacto__nombre_corto'"></i>
                            <i class="ki-outline ki-arrow-down fs-2" *ngIf="
                                this.ordenadoTabla === '-contrato__contacto__nombre_corto'
                              "></i>
                          </ng-container>
                          <ng-template #iconopordefecto>
                            <i class="ki-outline ki-arrow-up-down fs-2"></i>
                          </ng-template>
                        </div>
                      </div>
                      </th>
                      <th (click)="orderPor('contrato_id', 0)" [ngClass]="{ 'cursor-pointer user-select-none': true }"
                        class="bg-gray-100">
                        <div class="d-flex justify-content-between">
                        <div style="flex: 1; text-align: center" placement="top" ngbTooltip="Código contrato">
                          Ctn
                        </div>
                        <div>
                          <ng-container *ngIf="
                              this.ordenadoTabla === 'contrato_id' ||
                                this.ordenadoTabla === '-contrato_id' ;
                              else iconopordefecto
                            ">
                            <i class="ki-outline ki-arrow-up fs-2" *ngIf="this.ordenadoTabla === 'contrato_id'"></i>
                            <i class="ki-outline ki-arrow-down fs-2" *ngIf="
                                this.ordenadoTabla === '-contrato_id'
                              "></i>
                          </ng-container>
                          <ng-template #iconopordefecto>
                            <i class="ki-outline ki-arrow-up-down fs-2"></i>
                          </ng-template>
                        </div>
                      </div>
                      </th>
                      <th class="bg-gray-100">
                        <div placement="top" ngbTooltip="Fecha desde contrato">
                          Desde
                        </div>
                      </th>
                      <th class="bg-gray-100">
                        <div placement="top" ngbTooltip="Fecha hasta contrato">
                          Hasta
                        </div>
                      </th>
                      <th class="bg-gray-100">
                        <div>Salario</div>
                      </th>
                      <th class="bg-gray-100">
                        <div placement="top" ngbTooltip="Dias transporte">
                          DT
                        </div>
                      </th>
                      <th class="bg-gray-100">
                        <div placement="top" ngbTooltip="Dias">DIAS</div>
                      </th>
                      <th class="bg-gray-100">
                        <div placement="top" ngbTooltip="Diurna">D</div>
                      </th>
                      <th class="bg-gray-100">
                        <div placement="top" ngbTooltip="Nocturna">N</div>
                      </th>
                      <th class="bg-gray-100">
                        <div placement="top" ngbTooltip="Festiva diurna">
                          FD
                        </div>
                      </th>
                      <th class="bg-gray-100">
                        <div placement="top" ngbTooltip="Festiva nocturna">
                          FN
                        </div>
                      </th>
                      <th class="bg-gray-100">
                        <div placement="top" ngbTooltip="Extra diurna">ED</div>
                      </th>
                      <th class="bg-gray-100">
                        <div placement="top" ngbTooltip="Extra nocturna">
                          EN
                        </div>
                      </th>
                      <th class="bg-gray-100">
                        <div placement="top" ngbTooltip="Extra festiva diurna">
                          EFD
                        </div>
                      </th>
                      <th class="bg-gray-100">
                        <div placement="top" ngbTooltip="Extra festiva nocturna">
                          EFN
                        </div>
                      </th>
                      <th class="bg-gray-100">
                        <div placement="top" ngbTooltip="Recargo nocturno">
                          RN
                        </div>
                      </th>
                      <th class="bg-gray-100">
                        <div placement="top" ngbTooltip="Recargo festivo diurno">
                          RFD
                        </div>
                      </th>
                      <th class="bg-gray-100">
                        <div placement="top" ngbTooltip="Recargo festivo nocturno">
                          RFN
                        </div>
                      </th>
                      <th class="bg-gray-100">
                        <div placement="top" ngbTooltip="Valor neto">TOTAL</div>
                      </th>
                      <th class="bg-gray-100"></th>
                      <th class="bg-gray-100"></th>
                      <th class="text-center bg-gray-100">
                        <label for="seleccionarTodos">
                          <i class="cursor-pointer" [ngClass]="
                              isCheckedSeleccionarTodos
                                ? 'fa-solid fa-square-check text-danger'
                                : 'fa-regular fa-square text-gray-500'
                            ">
                            <span class="path1"></span>
                            <span class="path2"></span>
                          </i>

                          <input class="d-none" type="checkbox" #checkboxSelectAll id="seleccionarTodos"
                            [checked]="isCheckedSeleccionarTodos" [value]="isCheckedSeleccionarTodos"
                            (click)="toggleSelectAll($event)" />
                        </label>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <ng-container *ngFor="let programacionDetalle of arrProgramacionDetalle">
                      <tr>
                        <td style="width: 50px">
                          {{ programacionDetalle.id }}
                        </td>
                        <td>
                          {{
                          programacionDetalle.contrato_contacto_numero_identificacion
                          }}
                        </td>
                        <td>
                          {{
                          programacionDetalle.contrato_contacto_nombre_corto
                          }}
                        </td>
                        <td>
                          {{ programacionDetalle.contrato_id }}
                        </td>
                        <td [ngClass]="{
                            'marcar-ingreso': programacionDetalle.ingreso
                          }">
                          {{ programacionDetalle.fecha_desde }}
                        </td>
                        <td [ngClass]="{
                            'marcar-ingreso': programacionDetalle.retiro
                          }">
                          {{ programacionDetalle.fecha_hasta }}
                        </td>
                        <td class="text-end">
                          {{ programacionDetalle.salario | number }}
                        </td>
                        <td class="text-end">
                          {{ programacionDetalle.dias_transporte | number }}
                        </td>
                        <td class="text-end">
                          {{ programacionDetalle.dias | number }}
                        </td>
                        <td>{{ programacionDetalle.diurna }}</td>
                        <td>{{ programacionDetalle.nocturna }}</td>
                        <td>{{ programacionDetalle.festiva_diurna }}</td>
                        <td>{{ programacionDetalle.festiva_nocturna }}</td>
                        <td>{{ programacionDetalle.extra_diurna }}</td>
                        <td>{{ programacionDetalle.extra_nocturna }}</td>
                        <td>{{ programacionDetalle.extra_festiva_diurna }}</td>
                        <td>
                          {{ programacionDetalle.extra_festiva_nocturna }}
                        </td>
                        <td>{{ programacionDetalle.recargo_nocturno }}</td>
                        <td>
                          {{ programacionDetalle.recargo_festivo_diurno }}
                        </td>
                        <td>
                          {{ programacionDetalle.recargo_festivo_nocturno }}
                        </td>
                        <td class="text-end">
                          {{ programacionDetalle.total | number }}
                        </td>
                        <td class="w-45px">
                          @if(!programacion.estado_generado){
                          <label class="cursor-pointer" (click)="
                              abrirModalDeEditarRegistro(
                                contentModalEditarRegistro,
                                programacionDetalle.id
                              )
                            ">
                            <i class="ki-duotone ki-notepad-edit hover-primary">
                              <span class="path1"></span>
                              <span class="path2"></span>
                            </i>
                          </label>
                          }
                        </td>
                        <td class="w-45px">
                          <label class="cursor-pointer" (click)="
                              abrirModalDeNominaProgramacionDetalleResumen(
                                contentModalNominaProgramacionDetalleResumen,
                                programacionDetalle.id
                              )
                            ">
                            <i class="ki-duotone ki-notepad hover-primary">
                              <span class="path1"></span>
                              <span class="path2"></span>
                              <span class="path3"></span>
                              <span class="path4"></span>
                              <span class="path5"></span>
                            </i>
                          </label>
                        </td>
                        <td class="w-20px">
                          <label [for]="programacionDetalle.id">
                            <i class="cursor-pointer" [ngClass]="
                                checked.checked
                                  ? 'fa-solid fa-square-check text-danger'
                                  : 'fa-regular fa-square text-gray-500'
                              ">
                              <span class="path1"></span>
                              <span class="path2"></span>
                            </i>
                            <input #checked class="d-none" type="checkbox" [id]="programacionDetalle.id"
                              [value]="programacionDetalle.id" [checked]="programacionDetalle.selected" (click)="
                                agregarRegistrosEliminar(programacionDetalle.id)
                              " />
                          </label>
                        </td>
                      </tr>
                    </ng-container>
                  </tbody>
                </table>
              </div>
            </ng-template>
          </li>
          <li [ngbNavItem]="2" [destroyOnHide]="true" class="nav-item" (click)="consultarAdicionalesTab()">
            <a class="nav-link" ngbNavLink data-bs-toggle="tab"
              translate="FORMULARIOS.TITULOS.HUMPROGRAMACION.ADICIONAL"></a>
            <ng-template ngbNavContent>
              <div class="d-flex justify-content-end my-3">
                <div class="btn-group contenedor-btn-group">
                  <app-importar-administrador [estadoHabilitado]="programacion.estado_generado"
                    [modelo]="'HumAdicional'" role="group"
                    (emitirDetallesAgregados)="solicitarConsultarTabla()"></app-importar-administrador>
                  <button [disabled]="programacion.estado_generado" (click)="abrirModal(content)"
                    class="btn btn-sm btn-primary" type="button" translate="FORMULARIOS.BOTONES.COMUNES.NUEVO"></button>
                  <button type="button" [disabled]="programacion.estado_generado" class="btn btn-sm btn-danger"
                    (click)="eliminarRegistrosAdicional()" translate="FORMULARIOS.BOTONES.COMUNES.ELIMINAR"></button>
                </div>
              </div>
              <div class="table-responsive-sm">
                <table id="tableDetalles" class="table table-bordered table-sm">
                  <thead>
                    <tr class="bg-gray-100">
                      <th class="bg-gray-100" style="width: 50px">Id</th>
                      <th class="bg-gray-100" translate="FORMULARIOS.TITULOS.COMUNES.IDENTIFICACION"></th>
                      <th class="bg-gray-100" translate="FORMULARIOS.TITULOS.COMUNES.NOMBRE"></th>
                      <th class="bg-gray-100">
                        <div placement="top" ngbTooltip="Código contrato"
                          translate="FORMULARIOS.TITULOS.HUMPROGRAMACION.CONTRATONUMEROABREVITADO"></div>
                      </th>
                      <th class="bg-gray-100" translate="FORMULARIOS.TITULOS.HUMPROGRAMACION.CODIGO"></th>
                      <th class="bg-gray-100" translate="FORMULARIOS.TITULOS.HUMPROGRAMACION.CONCEPTO"></th>
                      <th class="bg-gray-100" translate="FORMULARIOS.TITULOS.COMUNES.VALOR"></th>
                      <th class="bg-gray-100" translate="FORMULARIOS.TITULOS.HUMPROGRAMACION.DIALABORADO"></th>
                      <th class="text-center bg-gray-100">
                        <label for="seleccionarTodos">
                          <i class="cursor-pointer" [ngClass]="
                              isCheckedSeleccionarTodosAdicional
                                ? 'fa-solid fa-square-check text-danger'
                                : 'fa-regular fa-square text-gray-500'
                            ">
                            <span class="path1"></span>
                            <span class="path2"></span>
                          </i>

                          <input class="d-none" type="checkbox" #checkboxSelectAll id="seleccionarTodos"
                            [checked]="isCheckedSeleccionarTodosAdicional" [value]="isCheckedSeleccionarTodosAdicional"
                            (click)="toggleSelectAllAdicional($event)" />
                        </label>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <ng-container *ngFor="
                        let programacionAdicional of arrProgramacionAdicional
                      ">
                      <tr>
                        <td class="w-40px">{{ programacionAdicional.id }}</td>
                        <td>
                          {{
                          programacionAdicional.contrato_contacto_numero_identificacion
                          }}
                        </td>
                        <td>
                          {{
                          programacionAdicional.contrato_contacto_nombre_corto
                          }}
                        </td>
                        <td>
                          {{ programacionAdicional.contrato_id }}
                        </td>
                        <td class="w-40px">
                          {{ programacionAdicional.concepto_id }}
                        </td>
                        <td>
                          {{ programacionAdicional.concepto_nombre }}
                        </td>
                        <td class="text-end">
                          {{ programacionAdicional.valor | number }}
                        </td>
                        <td>
                          {{
                          programacionAdicional.aplica_dia_laborado
                          ? "SI"
                          : "NO"
                          }}
                        </td>

                        <td class="w-20px">
                          <label [for]="programacionAdicional.id">
                            <i class="cursor-pointer" [ngClass]="
                                checked.checked
                                  ? 'fa-solid fa-square-check text-danger'
                                  : 'fa-regular fa-square text-gray-500'
                              ">
                              <span class="path1"></span>
                              <span class="path2"></span>
                            </i>
                            <input #checked class="d-none" type="checkbox" [id]="programacionAdicional.id"
                              [value]="programacionAdicional.id" [checked]="programacionAdicional.selected" (click)="
                                agregarRegistrosEliminarAdicional(
                                  programacionAdicional.id
                                )
                              " />
                          </label>
                        </td>
                      </tr>
                    </ng-container>
                  </tbody>
                </table>
              </div>
            </ng-template>
          </li>
        </ul>
        <div [ngbNavOutlet]="nav" class="mt-2"></div>
      </div>
    </div>
  </section>
</app-card>

<!-- Modal para adicionar programacion -->
<ng-template #content let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Adicional</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>
  <div class="modal-body">
    <form [formGroup]="formularioAdicionalProgramacion">
      <div class="row mb-5">
        <div class="col-12 col-md-12" ngbDropdown #ContratosDropdown="ngbDropdown">
          <label class="form-label required" translate="FORMULARIOS.CAMPOS.HUMANO.ADICIONAL.CONTRATO"></label>
          <div class="position-relative">
            <input type="text" class="form-control" ngbDropdownAnchor formControlName="contrato_nombre"
              (focus)="consultarContratos($event); ContratosDropdown.open()" (keyup)="consultarContratos($event)"
              [ngClass]="{
                'is-invalid':
                  formularioAdicionalProgramacion.controls['contrato']
                    .touched &&
                  formularioAdicionalProgramacion.controls['contrato'].invalid,
                'is-valid':
                  formularioAdicionalProgramacion.controls['contrato']
                    .touched &&
                  formularioAdicionalProgramacion.controls['contrato'].valid
              }" />
            <div class="position-absolute translate-middle-y top-50 end-0 me-3">
              <i class="bi bi-search fs-2"></i>
            </div>
          </div>
          <div ngbDropdownMenu aria-labelledby="dropdownBasic1" class="dropdown-menu">
            <ng-container *ngFor="let contrato of arrContratos">
              <button type="button" ngbDropdownItem (click)="modificarCampoFormulario('contrato', contrato)"
                (pointerenter)="modificarCampoFormulario('contrato', contrato)">
                {{ contrato.contrato_contacto_numero_identificacion }}
                {{ contrato.contrato_contacto_nombre_corto }}
              </button>
            </ng-container>
          </div>
          <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'required',
              message: 'FORMULARIOS.VALIDACIONES.COMUNES.REQUERIDO' | translate,
              control: formularioAdicionalProgramacion.controls['contrato']
            }"></ng-container>
        </div>
      </div>
      <div class="row mb-5">
        <div class="col-12 col-md-12">
          <label class="form-label required" translate="FORMULARIOS.CAMPOS.HUMANO.ADICIONAL.CONCEPTO"></label>
          <ng-select [items]="arrConceptosAdicional" bindLabel="concepto_nombre" bindValue="concepto_id"
            formControlName="concepto" notFoundText="Sin elementos" placeholder="Selecciona un elemento"
            class="select2Custom">
          </ng-select>
        </div>
      </div>
      <div class="row mb-5">
        <div class="col-12 col-md-6">
          <label class="form-label required" translate="FORMULARIOS.CAMPOS.HUMANO.ADICIONAL.VALOR"></label>
          <input type="number" class="form-control" formControlName="valor" prefix="$ " mask="separator.2" [ngClass]="{
              'is-invalid':
                formularioAdicionalProgramacion.controls['valor'].touched &&
                formularioAdicionalProgramacion.controls['valor'].invalid,
              'is-valid':
                formularioAdicionalProgramacion.controls['valor'].touched &&
                formularioAdicionalProgramacion.controls['valor'].valid
            }" />
          <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'required',
              message: 'FORMULARIOS.VALIDACIONES.COMUNES.REQUERIDO' | translate,
              control: formularioAdicionalProgramacion.controls['valor']
            }"></ng-container>
          <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'pattern',
              message: 'FORMULARIOS.VALIDACIONES.COMUNES.NOVALIDO' | translate,
              control: formularioAdicionalProgramacion.controls['valor']
            }"></ng-container>
        </div>
      </div>
      <div class="row mb-5">
        <div class="col-12 col-md-12">
          <label class="form-label" translate="FORMULARIOS.CAMPOS.HUMANO.ADICIONAL.DETALLE"></label>

          <textarea formControlName="detalle" class="form-control" id="exampleFormControlTextarea1" rows="3"
            (blur)="modificarCampoFormulario('detalle', null)" [ngClass]="{
              'is-invalid':
                formularioAdicionalProgramacion.controls['detalle'].touched &&
                formularioAdicionalProgramacion.controls['detalle'].invalid,
              'is-valid':
                formularioAdicionalProgramacion.controls['detalle'].touched &&
                formularioAdicionalProgramacion.controls['detalle'].valid
            }"></textarea>
          <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'required',
              message: 'FORMULARIOS.VALIDACIONES.COMUNES.REQUERIDO' | translate,
              control: formularioAdicionalProgramacion.controls['detalle']
            }"></ng-container>
        </div>
      </div>
      <div class="row mb-5">
        <div class="col-12 col-md-6">
          <div class="form-check form-check-custom form-check-solid">
            <input class="form-check-input" type="checkbox" value="1" id="aplica_dia_laborado"
              formControlName="aplica_dia_laborado" />
            <label class="form-check-label text-gray-700" for="aplica_dia_laborado"
              translate="FORMULARIOS.CAMPOS.HUMANO.ADICIONAL.APLICA_DIA_LABORADO">
            </label>
          </div>
        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="cerrarModal()"
      [disabled]="!formularioAdicionalProgramacion.valid">
      Guardar
    </button>
  </div>
</ng-template>

<!-- Modal para editar registros de detalle -->
<ng-template #contentModalEditarRegistro let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Editar registro</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>

  <div class="modal-body">
    <form [formGroup]="formularioEditarDetalleProgramacion" (ngSubmit)="actualizarDetalleProgramacion()">
      <div class="row mb-5">
        <div class="col-12 col-md-4">
          <label class="form-label required" translate="FORMULARIOS.TITULOS.COMUNES.DIURNA"></label>
          <input type="number" class="form-control" formControlName="diurna" [ngClass]="{
              'is-invalid':
                formularioEditarDetalleProgramacion.controls['diurna']
                  .touched &&
                formularioEditarDetalleProgramacion.controls['diurna'].invalid,
              'is-valid':
                formularioEditarDetalleProgramacion.controls['diurna']
                  .touched &&
                formularioEditarDetalleProgramacion.controls['diurna'].valid
            }" />
          <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'required',
              message: 'FORMULARIOS.VALIDACIONES.COMUNES.REQUERIDO' | translate,
              control: formularioEditarDetalleProgramacion.controls['diurna']
            }"></ng-container>
        </div>
        <div class="col-12 col-md-4">
          <label class="form-label required" translate="FORMULARIOS.TITULOS.COMUNES.NOCTURNA"></label>
          <input type="number" class="form-control" formControlName="nocturna" [ngClass]="{
              'is-invalid':
                formularioEditarDetalleProgramacion.controls['nocturna']
                  .touched &&
                formularioEditarDetalleProgramacion.controls['nocturna']
                  .invalid,
              'is-valid':
                formularioEditarDetalleProgramacion.controls['nocturna']
                  .touched &&
                formularioEditarDetalleProgramacion.controls['nocturna'].valid
            }" />
          <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'required',
              message: 'FORMULARIOS.VALIDACIONES.COMUNES.REQUERIDO' | translate,
              control: formularioEditarDetalleProgramacion.controls['nocturna']
            }"></ng-container>
        </div>
        <div class="col-12 col-md-4">
          <label class="form-label required" translate="FORMULARIOS.TITULOS.COMUNES.FESTIVADIURNA"></label>
          <input type="number" class="form-control" formControlName="festiva_diurna" [ngClass]="{
              'is-invalid':
                formularioEditarDetalleProgramacion.controls['festiva_diurna']
                  .touched &&
                formularioEditarDetalleProgramacion.controls['festiva_diurna']
                  .invalid,
              'is-valid':
                formularioEditarDetalleProgramacion.controls['festiva_diurna']
                  .touched &&
                formularioEditarDetalleProgramacion.controls['festiva_diurna']
                  .valid
            }" />
          <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'required',
              message: 'FORMULARIOS.VALIDACIONES.COMUNES.REQUERIDO' | translate,
              control:
                formularioEditarDetalleProgramacion.controls['festiva_diurna']
            }"></ng-container>
        </div>
      </div>
      <div class="row mb-5">
        <div class="col-12 col-md-4">
          <label class="form-label required" translate="FORMULARIOS.TITULOS.COMUNES.FESTIVANOCTURNA"></label>
          <input type="number" class="form-control" formControlName="festiva_nocturna" [ngClass]="{
              'is-invalid':
                formularioEditarDetalleProgramacion.controls['festiva_nocturna']
                  .touched &&
                formularioEditarDetalleProgramacion.controls['festiva_nocturna']
                  .invalid,
              'is-valid':
                formularioEditarDetalleProgramacion.controls['festiva_nocturna']
                  .touched &&
                formularioEditarDetalleProgramacion.controls['festiva_nocturna']
                  .valid
            }" />
          <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'required',
              message: 'FORMULARIOS.VALIDACIONES.COMUNES.REQUERIDO' | translate,
              control:
                formularioEditarDetalleProgramacion.controls['festiva_nocturna']
            }"></ng-container>
        </div>
        <div class="col-12 col-md-4">
          <label class="form-label required" translate="FORMULARIOS.TITULOS.COMUNES.EXTRADIURNA"></label>
          <input type="number" class="form-control" formControlName="extra_diurna" [ngClass]="{
              'is-invalid':
                formularioEditarDetalleProgramacion.controls['extra_diurna']
                  .touched &&
                formularioEditarDetalleProgramacion.controls['extra_diurna']
                  .invalid,
              'is-valid':
                formularioEditarDetalleProgramacion.controls['extra_diurna']
                  .touched &&
                formularioEditarDetalleProgramacion.controls['extra_diurna']
                  .valid
            }" />
          <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'required',
              message: 'FORMULARIOS.VALIDACIONES.COMUNES.REQUERIDO' | translate,
              control:
                formularioEditarDetalleProgramacion.controls['extra_diurna']
            }"></ng-container>
        </div>
        <div class="col-12 col-md-4">
          <label class="form-label required" translate="FORMULARIOS.TITULOS.COMUNES.EXTRANOCTURNA"></label>
          <input type="number" class="form-control" formControlName="extra_nocturna" [ngClass]="{
              'is-invalid':
                formularioEditarDetalleProgramacion.controls['extra_nocturna']
                  .touched &&
                formularioEditarDetalleProgramacion.controls['extra_nocturna']
                  .invalid,
              'is-valid':
                formularioEditarDetalleProgramacion.controls['extra_nocturna']
                  .touched &&
                formularioEditarDetalleProgramacion.controls['extra_nocturna']
                  .valid
            }" />
          <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'required',
              message: 'FORMULARIOS.VALIDACIONES.COMUNES.REQUERIDO' | translate,
              control:
                formularioEditarDetalleProgramacion.controls['extra_nocturna']
            }"></ng-container>
        </div>
      </div>
      <div class="row mb-5">
        <div class="col-12 col-md-4">
          <label class="form-label required" translate="FORMULARIOS.TITULOS.COMUNES.EXTRAFESTIVADIURNA"></label>
          <input type="number" class="form-control" formControlName="extra_festiva_diurna" [ngClass]="{
              'is-invalid':
                formularioEditarDetalleProgramacion.controls[
                  'extra_festiva_diurna'
                ].touched &&
                formularioEditarDetalleProgramacion.controls[
                  'extra_festiva_diurna'
                ].invalid,
              'is-valid':
                formularioEditarDetalleProgramacion.controls[
                  'extra_festiva_diurna'
                ].touched &&
                formularioEditarDetalleProgramacion.controls[
                  'extra_festiva_diurna'
                ].valid
            }" />
          <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'required',
              message: 'FORMULARIOS.VALIDACIONES.COMUNES.REQUERIDO' | translate,
              control:
                formularioEditarDetalleProgramacion.controls[
                  'extra_festiva_diurna'
                ]
            }"></ng-container>
        </div>
        <div class="col-12 col-md-4">
          <label class="form-label required" translate="FORMULARIOS.TITULOS.COMUNES.EXTRAFESTIVANOCTURNA"></label>
          <input type="number" class="form-control" formControlName="extra_festiva_nocturna" [ngClass]="{
              'is-invalid':
                formularioEditarDetalleProgramacion.controls[
                  'extra_festiva_nocturna'
                ].touched &&
                formularioEditarDetalleProgramacion.controls[
                  'extra_festiva_nocturna'
                ].invalid,
              'is-valid':
                formularioEditarDetalleProgramacion.controls[
                  'extra_festiva_nocturna'
                ].touched &&
                formularioEditarDetalleProgramacion.controls[
                  'extra_festiva_nocturna'
                ].valid
            }" />
          <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'required',
              message: 'FORMULARIOS.VALIDACIONES.COMUNES.REQUERIDO' | translate,
              control:
                formularioEditarDetalleProgramacion.controls[
                  'extra_festiva_nocturna'
                ]
            }"></ng-container>
        </div>
        <div class="col-12 col-md-4">
          <label class="form-label required" translate="FORMULARIOS.TITULOS.COMUNES.RECARGOFESTIVODIURNO"></label>
          <input type="number" class="form-control" formControlName="recargo_festivo_diurno" [ngClass]="{
              'is-invalid':
                formularioEditarDetalleProgramacion.controls[
                  'recargo_festivo_diurno'
                ].touched &&
                formularioEditarDetalleProgramacion.controls[
                  'recargo_festivo_diurno'
                ].invalid,
              'is-valid':
                formularioEditarDetalleProgramacion.controls[
                  'recargo_festivo_diurno'
                ].touched &&
                formularioEditarDetalleProgramacion.controls[
                  'recargo_festivo_diurno'
                ].valid
            }" />
          <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'required',
              message: 'FORMULARIOS.VALIDACIONES.COMUNES.REQUERIDO' | translate,
              control:
                formularioEditarDetalleProgramacion.controls[
                  'recargo_festivo_diurno'
                ]
            }"></ng-container>
        </div>
      </div>
      <div class="row mb-6">
        <div class="col-12 col-md-4">
          <label class="form-label required" translate="FORMULARIOS.TITULOS.COMUNES.RECARGOFESTIVONOCTURNO"></label>
          <input type="number" class="form-control" formControlName="recargo_festivo_nocturno" [ngClass]="{
              'is-invalid':
                formularioEditarDetalleProgramacion.controls[
                  'recargo_festivo_nocturno'
                ].touched &&
                formularioEditarDetalleProgramacion.controls[
                  'recargo_festivo_nocturno'
                ].invalid,
              'is-valid':
                formularioEditarDetalleProgramacion.controls[
                  'recargo_festivo_nocturno'
                ].touched &&
                formularioEditarDetalleProgramacion.controls[
                  'recargo_festivo_nocturno'
                ].valid
            }" />
          <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'required',
              message: 'FORMULARIOS.VALIDACIONES.COMUNES.REQUERIDO' | translate,
              control:
                formularioEditarDetalleProgramacion.controls[
                  'recargo_festivo_nocturno'
                ]
            }"></ng-container>
        </div>
        <div class="col-12 col-md-4">
          <label class="form-label required" translate="FORMULARIOS.TITULOS.COMUNES.RECARGONOCTURNO"></label>
          <input type="number" class="form-control" formControlName="recargo_nocturno" [ngClass]="{
              'is-invalid':
                formularioEditarDetalleProgramacion.controls['recargo_nocturno']
                  .touched &&
                formularioEditarDetalleProgramacion.controls['recargo_nocturno']
                  .invalid,
              'is-valid':
                formularioEditarDetalleProgramacion.controls['recargo_nocturno']
                  .touched &&
                formularioEditarDetalleProgramacion.controls['recargo_nocturno']
                  .valid
            }" />
          <ng-container [ngTemplateOutlet]="formError" [ngTemplateOutletContext]="{
              validation: 'required',
              message: 'FORMULARIOS.VALIDACIONES.COMUNES.REQUERIDO' | translate,
              control:
                formularioEditarDetalleProgramacion.controls['recargo_nocturno']
            }"></ng-container>
        </div>
      </div>

      <!-- Checkboxes -->
      <div class="row mb-5">
        <div class="col-12 col-md-6">
          <div class="form-check form-check-custom form-check-solid">
            <input class="form-check-input" type="checkbox" value="1" id="pago_horas" formControlName="pago_horas" />
            <label class="form-check-label text-gray-700" for="pago_horas"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.HORAS">
            </label>
          </div>
        </div>
        <div class="col-12 col-md-6">
          <div class="form-check form-check-custom form-check-solid">
            <input class="form-check-input" type="checkbox" value="1" id="descuento_salud"
              formControlName="descuento_salud" />
            <label class="form-check-label text-gray-700" for="descuento_salud"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.DESCUENTOSALUD">
            </label>
          </div>
        </div>
      </div>
      <div class="row mb-5">
        <div class="col-12 col-md-6">
          <div class="form-check form-check-custom form-check-solid">
            <input class="form-check-input" type="checkbox" value="1" id="pago_auxilio_transporte"
              formControlName="pago_auxilio_transporte" />
            <label class="form-check-label text-gray-700" for="pago_auxilio_transporte"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.AUXILIOTRANSPORTE">
            </label>
          </div>
        </div>
        <div class="col-12 col-md-6">
          <div class="form-check form-check-custom form-check-solid">
            <input class="form-check-input" type="checkbox" value="1" id="descuento_pension"
              formControlName="descuento_pension" />
            <label class="form-check-label text-gray-700" for="descuento_pension"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.DESCUENTOPENSION">
            </label>
          </div>
        </div>
      </div>
      <div class="row mb-5">
        <div class="col-12 col-md-6">
          <div class="form-check form-check-custom form-check-solid">
            <input class="form-check-input" type="checkbox" value="1" id="adicional" formControlName="adicional" />
            <label class="form-check-label text-gray-700" for="adicional"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.ADICIONAL">
            </label>
          </div>
        </div>
        <div class="col-12 col-md-6">
          <div class="form-check form-check-custom form-check-solid">
            <input class="form-check-input" type="checkbox" value="1" id="descuento_fondo_solidaridad"
              formControlName="descuento_fondo_solidaridad" />
            <label class="form-check-label text-gray-700" for="descuento_fondo_solidaridad"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.FONDO">
            </label>
          </div>
        </div>
      </div>
      <div class="row mb-5">
        <div class="col-12 col-md-6">
          <div class="form-check form-check-custom form-check-solid">
            <input class="form-check-input" type="checkbox" value="1" id="pago_vacacion"
              formControlName="pago_vacacion" />
            <label class="form-check-label text-gray-700" for="pago_vacacion"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.VACACION">
            </label>
          </div>
        </div>
        <div class="col-12 col-md-6">
          <div class="form-check form-check-custom form-check-solid">
            <input class="form-check-input" type="checkbox" value="1" id="descuento_retencion_fuente"
              formControlName="descuento_retencion_fuente" />
            <label class="form-check-label text-gray-700" for="descuento_retencion_fuente"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.RETENCION">
            </label>
          </div>
        </div>
      </div>
      <div class="row mb-5">
        <div class="col-12 col-md-6">
          <div class="form-check form-check-custom form-check-solid">
            <input class="form-check-input" type="checkbox" value="1" id="pago_incapacidad"
              formControlName="pago_incapacidad" />
            <label class="form-check-label text-gray-700" for="pago_incapacidad"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.INCAPACIDAD">
            </label>
          </div>
        </div>
        <div class="col-12 col-md-6">
          <div class="form-check form-check-custom form-check-solid">
            <input class="form-check-input" type="checkbox" value="1" id="descuento_credito"
              formControlName="descuento_credito" />
            <label class="form-check-label text-gray-700" for="descuento_credito"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.DESCUENTOCREDITO">
            </label>
          </div>
        </div>
      </div>
      <div class="row mb-5">
        <div class="col-12 col-md-6">
          <div class="form-check form-check-custom form-check-solid">
            <input class="form-check-input" type="checkbox" value="1" id="pago_licencia"
              formControlName="pago_licencia" />
            <label class="form-check-label text-gray-700" for="pago_licencia"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.LICENCIA">
            </label>
          </div>
        </div>
        <div class="col-12 col-md-6">
          <div class="form-check form-check-custom form-check-solid">
            <input class="form-check-input" type="checkbox" value="1" id="descuento_embargo"
              formControlName="descuento_embargo" />
            <label class="form-check-label text-gray-700" for="descuento_embargo"
              translate="FORMULARIOS.CAMPOS.HUMANO.PROGRAMACION.DESCUENTOEMBARGO">
            </label>
          </div>
        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="submit" class="btn btn-primary" (click)="actualizarDetalleProgramacion()">
      Guardar
    </button>
  </div>
</ng-template>

<!-- Modal para editar registros de detalle -->
<ng-template #contentModalNominaProgramacionDetalleResumen let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Nomina {{ pago.id }}</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>

  <div class="modal-body">
    <div class="table-responsive">
      <table class="table table-bordered table-sm">
        <tbody>
          <tr>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100" translate="FORMULARIOS.CAMPOS.FACTURA.NUMERO"></td>
            <td>{{ pago.numero }}</td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100" translate="FORMULARIOS.CAMPOS.HUMANO.PAGO.IBP"></td>
            <td class="text-end">{{ pago.base_prestacion | number }}</td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100" translate="FORMULARIOS.CAMPOS.HUMANO.PAGO.DEVENGADO">
            </td>
            <td class="text-end">{{ pago.devengado | number }}</td>
          </tr>
          <tr>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100" translate="FORMULARIOS.CAMPOS.HUMANO.PAGO.EMPLEADO"></td>
            <td>
              {{ pago.contacto_nombre_corto }} -
              {{ pago.contacto_numero_identificacion }}
            </td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100" translate="FORMULARIOS.CAMPOS.HUMANO.PAGO.IBC"></td>
            <td class="text-end">{{ pago.base_cotizacion | number }}</td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100" translate="FORMULARIOS.CAMPOS.HUMANO.PAGO.DEDUCCION">
            </td>
            <td class="text-end">{{ pago.deduccion | number }}</td>
          </tr>
          <tr>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100" translate="FORMULARIOS.CAMPOS.HUMANO.PAGO.DESDE"></td>
            <td>{{ pago.fecha }}</td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100" translate="FORMULARIOS.CAMPOS.HUMANO.PAGO.SALARIO"></td>
            <td class="text-end">{{ pago.salario | number }}</td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100" translate="FORMULARIOS.CAMPOS.HUMANO.PAGO.TOTAL"></td>
            <td class="text-end">{{ pago.total | number }}</td>
          </tr>
          <tr>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100" translate="FORMULARIOS.CAMPOS.HUMANO.PAGO.HASTA"></td>
            <td>{{ pago.fecha_hasta }}</td>
            <td class="fw-bold text-gray-800 fs-6 bg-gray-100"></td>
            <td></td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="table-responsive">
      <table id="tableDetalles" class="table table-bordered table-row-gray-500">
        <thead>
          <tr>
            <th class="bg-gray-100" style="width: 50px">Id</th>
            <th class="bg-gray-100" translate="FORMULARIOS.CAMPOS.HUMANO.PAGODETALLE.CODIGO"></th>
            <th class="bg-gray-100" translate="FORMULARIOS.CAMPOS.HUMANO.PAGODETALLE.CONCEPTO"></th>
            <th class="bg-gray-100" translate="FORMULARIOS.CAMPOS.HUMANO.PAGODETALLE.DETALLE"></th>
            <th class="bg-gray-100">
              <div placement="top" ngbTooltip="Código credito">CRE</div>
            </th>
            <th class="bg-gray-100" translate="FORMULARIOS.CAMPOS.HUMANO.PAGODETALLE.PORCENTAJE"></th>
            <th class="bg-gray-100">
              <div placement="top" ngbTooltip="Cantidad de horas">H</div>
            </th>
            <th class="bg-gray-100">
              <div placement="top" ngbTooltip="Días">D</div>
            </th>
            <th class="bg-gray-100">
              <div placement="top" ngbTooltip="Valor hora">Hora</div>
            </th>
            <th class="bg-gray-100" translate="FORMULARIOS.CAMPOS.HUMANO.PAGODETALLE.DEVENGADO"></th>
            <th class="bg-gray-100" translate="FORMULARIOS.CAMPOS.HUMANO.PAGODETALLE.DEDUCCION"></th>
            <th class="bg-gray-100">
              <div placement="top" ngbTooltip="Ingreso base prestación">
                IBP
              </div>
            </th>
            <th class="bg-gray-100">
              <div placement="top" ngbTooltip="Ingreso base cotización">
                IBC
              </div>
            </th>
            <th class="bg-gray-100" translate="FORMULARIOS.CAMPOS.HUMANO.PAGODETALLE.BASE"></th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let detalle of pagoDetalles; let i = index">
            <tr>
              <td style="width: 50px">{{ detalle.id }}</td>
              <td>{{ detalle.concepto_id }}</td>
              <td>{{ detalle.concepto_nombre }}</td>
              <td>{{ detalle.detalle }}</td>
              <td>{{ detalle.credito_id }}</td>
              <td class="text-end">{{ detalle.porcentaje }}</td>
              <td class="text-end">{{ detalle.cantidad }}</td>
              <td class="text-end">{{ detalle.dias }}</td>
              <td class="text-end">{{ detalle.hora | number : "1.0-0" }}</td>
              <td class="text-end">{{ detalle.devengado | number }}</td>
              <td class="text-end">{{ detalle.deduccion | number }}</td>
              <td class="text-end">{{ detalle.base_prestacion | number }}</td>
              <td class="text-end">{{ detalle.base_cotizacion | number }}</td>
              <td class="text-end">{{ detalle.base_impuesto | number }}</td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
  </div>
</ng-template>

<!-- Errores -->
<ng-template #formError let-control="control" let-message="message" let-validation="validation"
  let-cantidadCaracteres="cantidadCaracteres">
  <ng-container *ngIf="control.hasError(validation) && (control.dirty || control.touched)">
    <div class="fv-plugins-message-container">
      <div class="fv-help-block">
        <span role="alert"> {{ message }} {{ cantidadCaracteres }} </span>
      </div>
    </div>
  </ng-container>
</ng-template>