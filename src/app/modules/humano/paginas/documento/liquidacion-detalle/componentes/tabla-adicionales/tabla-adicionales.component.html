<div class="d-flex justify-content-end my-3">
  <div class="btn-group contenedor-btn-group">
    <button
      [disabled]="liquidacion.estado_generado"
      (click)="abrirModalNuevoAdicional()"
      class="btn btn-sm btn-primary"
      type="button"
    >
      Adicional
    </button>
    <button
      [disabled]="liquidacion.estado_generado"
      (click)="abrirModalNuevoDeduccion()"
      class="btn btn-sm btn-primary"
      type="button"
    >
      Deducción
    </button>
    <button
      type="button"
      [disabled]="liquidacion.estado_generado"
      class="btn btn-sm btn-danger"
      (click)="eliminarRegistros()"
      translate="FORMULARIOS.BOTONES.COMUNES.ELIMINAR"
    ></button>
  </div>
</div>
<div class="table-responsive-sm">
  <table id="tableDetalles" class="table table-bordered table-sm">
    <thead>
      <tr class="bg-gray-100">
        <th class="bg-gray-100" style="width: 50px">Id</th>
        <th class="bg-gray-100 text-center">Cod</th>
        <th class="bg-gray-100 text-center">Nombre</th>
        <th class="bg-gray-100 text-center">Adicional</th>
        <th class="bg-gray-100 text-center">Deducción</th>
        @if (!liquidacion.estado_generado) {
          <th class="text-center bg-gray-100"></th>
          <th class="text-center bg-gray-100">
            <label for="seleccionarTodos">
              <i
                class="cursor-pointer"
                [ngClass]="
                  isCheckedSeleccionarTodos()
                    ? 'fa-solid fa-square-check text-danger'
                    : 'fa-regular fa-square text-gray-500'
                "
              >
                <span class="path1"></span>
                <span class="path2"></span>
              </i>

              <input
                class="d-none"
                type="checkbox"
                #checkboxSelectAll
                id="seleccionarTodos"
                [checked]="isCheckedSeleccionarTodos()"
                [value]="isCheckedSeleccionarTodos()"
                (click)="toggleSelectAll($event)"
              />
            </label>
          </th>
        }
      </tr>
    </thead>
    <tbody>
      @for (liquidacionAdicional of arrLiquidacionAdicional(); track $index) {
        <tr>
          <td class="w-40px">{{ liquidacionAdicional.id }}</td>
          <td>
            {{ liquidacionAdicional.concepto }}
          </td>
          <td>
            {{ liquidacionAdicional.concepto__nombre }}
          </td>
          <td class="text-end">
            {{ liquidacionAdicional.adicional | number: "1.0-0" }}
          </td>
          <td class="text-end">
            {{ liquidacionAdicional.deduccion | number: "1.0-0" }}
          </td>

          @if (!liquidacion.estado_generado) {
            <td class="w-20px">
              <label
                class="cursor-pointer"
                (click)="abrirModalEditar(liquidacionAdicional)"
              >
                <i class="ki-duotone ki-notepad-edit hover-primary">
                  <span class="path1"></span>
                  <span class="path2"></span>
                </i>
              </label>
            </td>
            <td class="w-20px">
              <label [for]="liquidacionAdicional.id">
                <i
                  class="cursor-pointer"
                  [ngClass]="
                    liquidacionAdicional.selected
                      ? 'fa-solid fa-square-check text-danger'
                      : 'fa-regular fa-square text-gray-500'
                  "
                >
                  <span class="path1"></span>
                  <span class="path2"></span>
                </i>
                <input
                  #checked
                  class="d-none"
                  type="checkbox"
                  [id]="liquidacionAdicional.id"
                  [value]="liquidacionAdicional.id"
                  [checked]="liquidacionAdicional.selected"
                  (click)="agregarRegistrosEliminar(liquidacionAdicional.id)"
                />
              </label>
            </td>
          }
        </tr>
      }
    </tbody>
  </table>
</div>
<app-modal-liquidacion-adicional
  [liquidacionId]="liquidacion.id"
  (emitirConsultarLista)="consultarDatos()"
></app-modal-liquidacion-adicional>
