<div class="container-fluid">
  @if (consumos(); as datosConsumo) {
    <!-- Resumen del consumo -->
    <div class="row mb-4">
      <div class="col-12">
        <div class="table-responsive">
          <table class="table table-bordered table-sm">
            <tbody>
              <tr>
                <td class="fw-bold text-gray-800 fs-6 bg-gray-100">
                  Período de consumo
                </td>
                <td>
                  Del
                  {{
                    movimientoSeleccionado.fecha_desde_consumo
                      | date: "dd/MM/yyyy"
                  }}
                  al
                  {{
                    movimientoSeleccionado.fecha_hasta_consumo
                      | date: "dd/MM/yyyy"
                  }}
                </td>
              </tr>
              <tr>
                <td class="fw-bold text-gray-800 fs-6 bg-gray-100">
                  Total de contenedores
                </td>
                <td>{{ datosConsumo.consumos.length }} contenedores</td>
              </tr>
              <tr>
                <td class="fw-bold text-gray-800 fs-6 bg-gray-100">
                  Precio del plan
                </td>
                <td>$ {{ datosConsumo.plan_precio | number }}</td>
              </tr>
              <tr>
                <td class="fw-bold text-gray-800 fs-6 bg-gray-100">
                  Total consumo
                </td>
                <td class="fw-bold">
                  $ {{ datosConsumo.total_consumo | number }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Detalle por contenedor -->
    <div class="row">
      <div class="col-12">
        <div class="table-responsive">
          <table
          class="table table-row-bordered align-middle gy-4 gs-9"
          >
            <thead
            class="border-bottom border-gray-200 fs-6 text-gray-600 fw-bold bg-light bg-opacity-75"
            >
              <tr class="fw-bold text-gray-800">
                <th>Contenedor</th>
                <th>Subdominio</th>
                <th>Plan</th>
                <th>Precio plan</th>
                <th class="text-end">Total</th>
              </tr>
            </thead>
            <tbody>
              @for (
                consumo of datosConsumo.consumos;
                track consumo.contenedor_id
              ) {
                <tr>
                  <td>{{ consumo.contenedor }}</td>
                  <td>{{ consumo.subdominio }}</td>
                  <td>{{ consumo.plan__nombre }}</td>
                  <td>$ {{ consumo.plan__precio | number }}</td>
                  <td class="text-end fw-bold">
                    $ {{ consumo.vr_total | number }}
                  </td>
                </tr>
              } @empty {
                <tr>
                  <td colspan="5" class="text-center text-muted">
                    No hay consumos registrados
                  </td>
                </tr>
              }
            </tbody>
          </table>
        </div>
      </div>
    </div>
  } @else {
    <!-- Estado de carga -->
    <div class="row">
      <div class="col-12 text-center">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Cargando...</span>
        </div>
        <p class="mt-2">Cargando información del consumo...</p>
      </div>
    </div>
  }
</div>
